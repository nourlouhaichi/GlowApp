


<div class="container-fluid py-5 mt-5 ">
<div class="form-container">
{{ form_start(form, {'attr': {'novalidate': 'novalidate','class':'form-horizontal'}})}}

<div class="form-group">
    {{ form_label(form.titre_p, 'Title', {'label_attr': {'class': 'control-label'}}) }}
    {{ form_widget(form.titre_p, {'attr': {'class': 'form-control'}}) }}
    {{ form_errors(form.titre_p) }}
</div>

<div class="form-group">
    {{ form_label(form.type_p, 'Type', {'label_attr': {'class': 'control-label'}}) }}
    {{ form_widget(form.type_p, {'attr': {'class': 'form-control'}}) }}
    {{ form_errors(form.type_p) }}
</div>

<div class="form-group">
    {{ form_label(form.contenue_p, 'Content', {'label_attr': {'class': 'control-label'}}) }}
    {{ form_widget(form.contenue_p, {'attr': {'class': 'form-control'}}) }}
    {{ form_errors(form.contenue_p) }}
</div>
<div class="form-group">
    {{ form_label(form.images, 'Image', {'label_attr': {'class': 'control-label'}}) }}
    {{ form_widget(form.images, {'attr': {'class': 'form-control'}}) }}
    {{ form_errors(form.images) }}
</div>
<br>
<div style="display: flex; width: 100%">
            <button class="btn btn-primary border-2 border-secondary  rounded-pill text-white h-100" style="width: 120px; margin: 0 auto" type="submit" class="btn btn-primary">
                <i style="color: white" class="fa fa-save me-2"></i>
                    {{ button_label|default('Save') }}
            </button>
        </div>
        {% macro filterComment(comment, prohibitedWords) %}
    {% set sanitizedComment = comment %}
    {% for word in prohibitedWords %}
        {% if sanitizedComment|lower|replace({' ': ''})|contains(word|lower|replace({' ': ''})) %}
            {% set sanitizedComment = sanitizedComment|replace({word: '***'}) %}
        {% endif %}
    {% endfor %}
    {{ sanitizedComment }}
{% endmacro %}

<form action="{{ path('submit_comment') }}" method="post">
    <textarea name="comment"></textarea>
    <button type="submit">Submit</button>
</form>

{% if app.request.method == 'POST' %}
    {% set filteredComment = _self.filterComment(app.request.get('comment'), prohibitedWords) %}
    {% if filteredComment != app.request.get('comment') %}
        <p>Error: Your comment contains prohibited words.</p>
    {% else %}
        <p>Comment submitted successfully!</p>
    {% endif %}
{% endif %}

        {{ form_end(form) }}
    </div>
<a href="{{ path('app_publications') }}">Back to list</a>

{{ form_end(form) }}

</div>